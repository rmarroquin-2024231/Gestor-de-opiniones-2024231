[2026-02-09 01:51:36 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-09 01:51:37 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-09 01:51:37 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-09 01:51:37 INF] API de AuthService está ejecutándose en http://localhost:5074. Endpoint de salud: http://localhost:5074/api/v1/health {"SourceContext":"Program"}
[2026-02-09 01:52:46 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJ7M0RB67FH:00000001","RequestPath":"/api/v1/health","ConnectionId":"0HNJ7M0RB67FH"}
[2026-02-09 01:52:46 INF] HTTP GET /api/v1/health responded 200 in 206.9436 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FH:00000001","ConnectionId":"0HNJ7M0RB67FH"}
[2026-02-09 01:54:24 INF] HTTP GET /api/v1/auth/profile responded 401 in 9.3016 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FJ:00000001","ConnectionId":"0HNJ7M0RB67FJ"}
[2026-02-09 02:03:52 INF] HTTP POST /api/v1/auth/register responded 400 in 95.1711 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FL:00000001","ConnectionId":"0HNJ7M0RB67FL"}
[2026-02-09 02:06:07 INF] User Jeffsito registered successfully {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"feb2edfd-7fd1-4089-a759-6d5a0601da7e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJ7M0RB67FN:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ7M0RB67FN"}
[2026-02-09 02:06:07 INF] HTTP POST /api/v1/auth/register responded 201 in 1059.8103 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FN:00000001","ConnectionId":"0HNJ7M0RB67FN"}
[2026-02-09 02:06:09 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"feb2edfd-7fd1-4089-a759-6d5a0601da7e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJ7M0RB67FN:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ7M0RB67FN"}
[2026-02-09 02:06:10 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"feb2edfd-7fd1-4089-a759-6d5a0601da7e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJ7M0RB67FN:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ7M0RB67FN"}
[2026-02-09 02:06:10 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"feb2edfd-7fd1-4089-a759-6d5a0601da7e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJ7M0RB67FN:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ7M0RB67FN"}
[2026-02-09 02:06:10 INF] Verification email sent {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"feb2edfd-7fd1-4089-a759-6d5a0601da7e","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJ7M0RB67FN:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ7M0RB67FN"}
[2026-02-09 02:11:03 INF] HTTP POST /api/v1/auth/login responded 400 in 30.2747 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FP:00000001","ConnectionId":"0HNJ7M0RB67FP"}
[2026-02-09 02:11:49 WRN] Failed login attempt {"EventId":{"Id":1003,"Name":"LogFailedLoginAttempt"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"06d294f6-17ad-4e02-a717-890ed8750e91","ActionName":"AuthService.Api.Controllers.AuthController.Login (AuthService.Api)","RequestId":"0HNJ7M0RB67FP:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ7M0RB67FP"}
[2026-02-09 02:11:49 ERR] An unhandled exception occurred {"SourceContext":"AuthService.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJ7M0RB67FP:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ7M0RB67FP"}
System.UnauthorizedAccessException: User account is disabled
   at AuthService.Application.Services.AuthService.LoginAsync(LoginDto loginDto) in C:\Users\beard\OneDrive\Documents\FoodLine\auth-service\src\AuthService.Application\Services\AuthService.cs:line 147
   at AuthService.Api.Controllers.AuthController.Login(LoginDto loginDto) in C:\Users\beard\OneDrive\Documents\FoodLine\auth-service\src\AuthService.Api\Controllers\AuthController.cs:line 81
   at lambda_method454(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\Users\beard\OneDrive\Documents\FoodLine\auth-service\src\AuthService.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-09 02:11:49 INF] HTTP POST /api/v1/auth/login responded 401 in 199.0739 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FP:00000002","ConnectionId":"0HNJ7M0RB67FP"}
[2026-02-09 02:15:03 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"d3de42c1-36bc-455d-9007-887fe7acfc9f","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJ7M0RB67FR:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ7M0RB67FR"}
[2026-02-09 02:15:03 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"d3de42c1-36bc-455d-9007-887fe7acfc9f","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJ7M0RB67FR:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ7M0RB67FR"}
[2026-02-09 02:15:03 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"d3de42c1-36bc-455d-9007-887fe7acfc9f","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJ7M0RB67FR:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ7M0RB67FR"}
[2026-02-09 02:15:03 INF] Email verified successfully for user Jeffsito {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"d3de42c1-36bc-455d-9007-887fe7acfc9f","ActionName":"AuthService.Api.Controllers.AuthController.VerifyEmail (AuthService.Api)","RequestId":"0HNJ7M0RB67FR:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ7M0RB67FR"}
[2026-02-09 02:15:03 INF] HTTP POST /api/v1/auth/verify-email responded 200 in 1543.4411 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FR:00000001","ConnectionId":"0HNJ7M0RB67FR"}
[2026-02-09 02:15:27 INF] User login succeeded {"EventId":{"Id":1002,"Name":"LogUserLoggedIn"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"06d294f6-17ad-4e02-a717-890ed8750e91","ActionName":"AuthService.Api.Controllers.AuthController.Login (AuthService.Api)","RequestId":"0HNJ7M0RB67FR:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ7M0RB67FR"}
[2026-02-09 02:15:27 INF] HTTP POST /api/v1/auth/login responded 200 in 373.0525 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FR:00000002","ConnectionId":"0HNJ7M0RB67FR"}
[2026-02-09 02:20:14 INF] HTTP GET /api/v1/auth/profile responded 401 in 2.0767 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FT:00000001","ConnectionId":"0HNJ7M0RB67FT"}
[2026-02-09 02:21:08 INF] HTTP GET /api/v1/auth/profile responded 200 in 68.9379 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FT:00000002","ConnectionId":"0HNJ7M0RB67FT"}
[2026-02-09 02:24:09 INF] HTTP POST /api/v1/auth/resend-verification responded 400 in 39.4622 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67FV:00000001","ConnectionId":"0HNJ7M0RB67FV"}
[2026-02-09 02:27:12 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"855e7d86-a214-40ba-a1d0-7f7101397473","ActionName":"AuthService.Api.Controllers.AuthController.ForgotPassword (AuthService.Api)","RequestId":"0HNJ7M0RB67G1:00000001","RequestPath":"/api/v1/auth/forgot-password","ConnectionId":"0HNJ7M0RB67G1"}
[2026-02-09 02:27:13 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"855e7d86-a214-40ba-a1d0-7f7101397473","ActionName":"AuthService.Api.Controllers.AuthController.ForgotPassword (AuthService.Api)","RequestId":"0HNJ7M0RB67G1:00000001","RequestPath":"/api/v1/auth/forgot-password","ConnectionId":"0HNJ7M0RB67G1"}
[2026-02-09 02:27:13 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"855e7d86-a214-40ba-a1d0-7f7101397473","ActionName":"AuthService.Api.Controllers.AuthController.ForgotPassword (AuthService.Api)","RequestId":"0HNJ7M0RB67G1:00000001","RequestPath":"/api/v1/auth/forgot-password","ConnectionId":"0HNJ7M0RB67G1"}
[2026-02-09 02:27:13 INF] Password reset email sent to jeremydragon0209@gmail.com {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"855e7d86-a214-40ba-a1d0-7f7101397473","ActionName":"AuthService.Api.Controllers.AuthController.ForgotPassword (AuthService.Api)","RequestId":"0HNJ7M0RB67G1:00000001","RequestPath":"/api/v1/auth/forgot-password","ConnectionId":"0HNJ7M0RB67G1"}
[2026-02-09 02:27:13 INF] HTTP POST /api/v1/auth/forgot-password responded 200 in 1019.4915 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67G1:00000001","ConnectionId":"0HNJ7M0RB67G1"}
[2026-02-09 02:28:46 INF] Password reset successfully for user Jeffsito {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"95f3faad-d19b-498d-9ff4-1aaf606deef3","ActionName":"AuthService.Api.Controllers.AuthController.ResetPassword (AuthService.Api)","RequestId":"0HNJ7M0RB67G3:00000001","RequestPath":"/api/v1/auth/reset-password","ConnectionId":"0HNJ7M0RB67G3"}
[2026-02-09 02:28:46 INF] HTTP POST /api/v1/auth/reset-password responded 200 in 139.3786 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67G3:00000001","ConnectionId":"0HNJ7M0RB67G3"}
[2026-02-09 02:30:03 INF] HTTP POST /api/v1/auth/profile/by-id responded 200 in 10.0389 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67G5:00000001","ConnectionId":"0HNJ7M0RB67G5"}
[2026-02-09 02:35:46 INF] User login succeeded {"EventId":{"Id":1002,"Name":"LogUserLoggedIn"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"06d294f6-17ad-4e02-a717-890ed8750e91","ActionName":"AuthService.Api.Controllers.AuthController.Login (AuthService.Api)","RequestId":"0HNJ7M0RB67G7:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ7M0RB67G7"}
[2026-02-09 02:35:47 INF] HTTP POST /api/v1/auth/login responded 200 in 115.4461 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67G7:00000001","ConnectionId":"0HNJ7M0RB67G7"}
[2026-02-09 02:37:30 INF] HTTP GET /api/v1/users/usr_C216uzvK8em3/role responded 405 in 3.2940 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67G9:00000001","ConnectionId":"0HNJ7M0RB67G9"}
[2026-02-09 02:40:16 INF] HTTP GET /api/v1/users/usr_C216uzvK8em3/role responded 405 in 0.3387 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67GB:00000001","ConnectionId":"0HNJ7M0RB67GB"}
[2026-02-09 02:40:24 INF] HTTP GET /api/v1/auth/profile responded 200 in 6.6452 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67GB:00000002","ConnectionId":"0HNJ7M0RB67GB"}
[2026-02-09 02:40:49 INF] HTTP PUT /api/v1/users/usr_C216uzvK8em3/role responded 200 in 66.4462 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67GB:00000003","ConnectionId":"0HNJ7M0RB67GB"}
[2026-02-09 02:41:04 INF] HTTP GET /api/v1/auth/profile responded 200 in 6.1454 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67GB:00000004","ConnectionId":"0HNJ7M0RB67GB"}
[2026-02-09 02:42:53 INF] HTTP GET /api/v1/users/usr_C216uzvK8em3/roles responded 200 in 12.0994 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67GD:00000001","ConnectionId":"0HNJ7M0RB67GD"}
[2026-02-09 02:43:13 INF] HTTP GET /api/v1/users/usr_C216uzvK8em3/roles responded 200 in 4.4759 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67GD:00000002","ConnectionId":"0HNJ7M0RB67GD"}
[2026-02-09 02:43:24 INF] HTTP GET /api/v1/users/usr_C216uzvK8em3/roles responded 200 in 3.8812 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67GD:00000003","ConnectionId":"0HNJ7M0RB67GD"}
[2026-02-09 02:44:07 INF] HTTP GET /api/v1/users/by-role/USER_ROLE responded 200 in 38.7115 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67GD:00000004","ConnectionId":"0HNJ7M0RB67GD"}
[2026-02-09 02:44:17 INF] HTTP GET /api/v1/users/by-role/ADMIN_ROLE responded 200 in 9.5263 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ7M0RB67GD:00000005","ConnectionId":"0HNJ7M0RB67GD"}
[2026-02-09 02:46:15 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-09 02:46:16 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-09 02:46:16 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-09 02:46:16 INF] API de AuthService está ejecutándose en http://localhost:5074. Endpoint de salud: http://localhost:5074/api/v1/health {"SourceContext":"Program"}
